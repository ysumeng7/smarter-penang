<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link type="text/css" rel="stylesheet" href="assets/css/circle.css"  media="screen,projection"/>
  <link type="text/css" rel="stylesheet" href="assets/css/main.css"  media="screen,projection"/>
  <link type="text/css" rel="stylesheet" href="assets/lib/materialize/css/materialize.min.css"  media="screen,projection"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Numbawan</title>
</head>

<body>
  <nav class="bgcolor-1">
    <div class="nav-wrapper">
      <a href="#" class="brand-logo">HOME</a>
    </div>   
  </nav>
  <main>   
    <div id="pt-main" class="pt-perspective">
        
        <div class="pt-page pt-page-1 pt-page-current pt-page-moveFromRight">
            <div id="map"> </div>
        </div>

        <div class="pt-page pt-page-2">
            <div class="row quest-card">
                <div class="col s12">
                    <a href="#" class="pg3btn">
                      <div class="card">
                        <div class="card-content quest-card-bg">
                            <div class="row">
                                <div class="col s3 no-padding">
                                    <img src="assets/images/i-pau.png" width="100" height="100">
                                </div>
                                <div class="col s6">
                                    <h5>Like a Baus</h5>
                                    <p>"I Want Pau!" aka "哥妹俩的童年回忆" by WK Setor</p>
                                </div>
                            </div>
                            <div class="completion-rate2">
                                <div class="c100 p20 small">
                                    <span>20%</span>
                                    <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                </div>
                            </div>
                        </div>
                      </div>
                    </a>
                </div>          
            </div>
            <div class="row quest-card">
                <div class="col s12">
                    <a href="#" class="pg6btn">
                        <div class="card">
                            <div class="card-content quest-card-bg">
                                <div class="row">
                                    <div class="col s3 no-padding">
                                        <img src="assets/images/i-cat.png" width="100" height="100">
                                    </div>
                                    <div class="col s6">
                                        <h5>A Lucky Mew</h5>
                                        <p>"Love Me Like Your Fortune Cat" by ASA, or Artists for Stray Animals</p>
                                    </div>
                                </div>
                                <div class="completion-rate2">
                                    <div class="c100 p40 small">
                                        <span>40%</span>
                                        <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>          
            </div>
            <div class="row quest-card">
                <div class="col s12">
                    <a href="#" class="pg5btn">
                        <div class="card">
                            <div class="card-content quest-card-bg">
                                <div class="row">
                                    <div class="col s3 no-padding">
                                        <img src="assets/images/i-bicycle.png" width="100" height="100">
                                    </div>
                                    <div class="col s6">
                                        <h5>Bike of Whizz</h5>
                                        <p>“Little Children on a Bicycle” by Ernest Zacharevic</p>
                                    </div>
                                </div>
                                <div class="completion-rate2">
                                    <div class="c100 p80 small">
                                        <span>80%</span>
                                        <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>          
            </div>
        </div>

        <div class="pt-page pt-page-3">
            <div class="quest-details">
                <div class="main-div">
                    <div class="row">
                        <div class="col s4">
                            <img src="assets/images/i-pau.png" width="100" height="100">
                        </div>
                        <div class="col s6">
                            <p>Hot Stacks!</p>
                            <p>"I Want Pau!" aka "哥妹俩的童年回忆" by WK Setor</p>
                        </div>
                        <div class="col s2">
                            <div class="completion-rate">
                                <div class="c100 p20 small">
                                    <span>2/8</span>
                                    <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sub-div">                   
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                            <div class="card">
                                <div class="card-content quest-card-bg">
                                    <div class="row">
                                        <div class="col s10">
                                            <span class="text">Number of steamer trays on the mural!</span>
                                        </div>
                                        <div class="col s2">
                                            <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                                <div class="card">
                                    <div class="card-content quest-card-bg">
                                        <div class="row">
                                            <div class="col s10">
                                                <span class="text">Why are there 2 children painted?</span>
                                            </div>
                                            <div class="col s2">
                                                <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>          
                    </div>
                </div>
            </div>            
        </div>

        <div class="pt-page pt-page-6">
            <div class="quest-details">
                <div class="main-div">
                    <div class="row">
                        <div class="col s4">
                            <img src="assets/images/i-cat.png" width="100" height="100">
                        </div>
                        <div class="col s6">
                            <p>A Lucky Mew</p>
                            <p>"Love Me Like Your Fortune Cat" by ASA, or Artists for Stray Animals</p>
                        </div>
                        <div class="col s2">
                            <div class="completion-rate">
                                <div class="c40 p100 small">
                                    <span>4/8</span>
                                    <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sub-div">                   
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                            <div class="card">
                                <div class="card-content quest-card-bg">
                                    <div class="row">
                                        <div class="col s10">
                                            <span class="text">Number of steamer trays on the mural!</span>
                                        </div>
                                        <div class="col s2">
                                            <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                                <div class="card">
                                    <div class="card-content quest-card-bg">
                                        <div class="row">
                                            <div class="col s10">
                                                <span class="text">Why are there 2 children painted?</span>
                                            </div>
                                            <div class="col s2">
                                                <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>          
                    </div>
                </div>
            </div>            
        </div>

        <div class="pt-page pt-page-5">
            <div class="quest-details">
                <div class="main-div">
                    <div class="row">
                        <div class="col s4">
                            <img src="assets/images/i-bicycle.png" width="100" height="100">
                        </div>
                        <div class="col s6">
                            <p>Bike of Whizz</p>
                            <p>“Little Children on a Bicycle” by Ernest Zacharevic</p>
                        </div>
                        <div class="col s2">
                            <div class="completion-rate">
                                <div class="c100 p80 small">
                                    <span>6/8</span>
                                    <div class="slice"><div class="bar"></div><div class="fill"></div></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sub-div">                   
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                            <div class="card">
                                <div class="card-content quest-card-bg">
                                    <div class="row">
                                        <div class="col s10">
                                            <span class="text">Who is the artist of this mural?</span>
                                        </div>
                                        <div class="col s2">
                                            <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="row quest-card">
                        <div class="col s12">
                            <a class="modal-trigger" href="#modal1">
                                <div class="card">
                                    <div class="card-content quest-card-bg">
                                        <div class="row">
                                            <div class="col s10">
                                                <span class="text">Why are there 2 children painted?</span>
                                            </div>
                                            <div class="col s2">
                                                <span class="reward-point">5</span>
                                            <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>          
                    </div>
                </div>
            </div>            
        </div>

        <div class="pt-page pt-page-4">
            <div class="inventory">
                <div class="row quest-card">
                    <div class="col s12">
                        <a class="modal-trigger" href="#modal3">
                            <div class="card">
                                <div class="card-content inventory-card-bg">
                                    <div class="row">
                                        <div class="col s4">
                                            <img src="assets/images/i-dino.png" width="100" height="100">
                                        </div>
                                        <div class="col s8">
                                            <h5>Roar of the Saur</h5>
                                            <p>"Little Boy with Pet Dinosaur" by Ernest Zacharevic</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>          
                </div>
                <div class="row quest-card">
                    <div class="col s12">
                        <a class="modal-trigger" href="#modal4">
                            <div class="card">
                                <div class="card-content inventory-card-bg">
                                    <div class="row">
                                        <div class="col s4">
                                            <img src="assets/images/i-girl.png" width="100" height="100">
                                        </div>
                                        <div class="col s8">
                                            <h5>Maiden’s Token</h5>
                                            <p>"Three Chinese Dolls", Artist(s) Unknown </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>          
                </div>
                <div class="row quest-card">
                    <div class="col s12">
                        <a class="modal-trigger" href="#modal5">
                            <div class="card">
                                <div class="card-content inventory-card-bg">
                                    <div class="row">
                                        <div class="col s4">
                                            <img src="assets/images/i-bicycle.png" width="100" height="100">
                                        </div>
                                        <div class="col s8">
                                            <h5>Bike of Whizz</h5>
                                            <p>“Little Children on a Bicycle” by Ernest Zacharevic</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>          
                </div>
            </div>
        </div>
    </div>


  </main>

  <footer class="page-footer bgcolor-1">
    <div class="container">
      <div class="row">       
        <div class="col s4" id="app-footer">
            <a href="#" class="pg2btn">
                <img src="assets/images/nav-quest.png" width="35">
             </a>
        </div>
        <div class="col s4 map-button" id="app-footer">
          <a href="#" class="pg1btn">
            <img src="assets/images/nav-maps-selected.png" width="35">
          </a>
        </div>
        <div class="col s4" id="app-footer">
          <a href="#" class="pg4btn">
            <img src="assets/images/nav-inventory.png" width="35">
          </a>
        </div>
      </div>
    </div>
  </footer>

    <div id="modal1" class="quest-modal modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col s10">
                        <h5>Number of steamer trays on the mural!</h5>
                    </div>
                    <div class="col s2">
                        <span class="reward-point">5</span>
                        <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                    </div>
                </div>
                
            </div>
            <p>Take notice of the number of trays and calculate to get the answer!</p>
        </div>
        <div class="modal-footer">
            <div class="col offset-s1 s10 modal-close">
                <span>GO !</span>
            </div>
        </div>
    </div>
    <div id="modal2" class="quest-modal modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col s10">
                        <h5>Why are there 2 children painted?</h5>
                    </div>
                    <div class="col s2">
                        <span class="reward-point">5</span>
                        <img src="assets/images/reward-badge.png" width="30" class="reward-badge">
                    </div>
                </div>
                
            </div>
            <p>Take a random guess!</p>
        </div>
        <div class="modal-footer">
            <div class="col offset-s1 s10 modal-close">
                <span>GO !</span>
            </div>
        </div>
    </div>

    <div id="modal3" class="inventory-modal modal">
        <div class="modal-close">
            <span>X</span>
        </div>
        <div class="modal-content">
            <div class="modal-img center">
                <img src="assets/images/i-dino.png" width="100" height="100">
            </div>
            <h5 class="center">Roar of the Saur</h5>
            <hr>
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a  class="active" href="#tab1">Description</a></li>
                        <li class="tab col s3"><a href="#tab2">Reward</a></li>                    
                    </ul>
                </div>
                <div id="tab1" class="col s12">
                    <img src="assets/images/i-actual-dino.jpg" width="100%">
                    <p>"Little Boy with Pet Dinosaur" by Ernest Zacharevic</p>
                    <p>This painting was commissioned by the Penang Island Municipal Council (MPPP) to provide a collection of street art in conjunction with the 2012 George Town Festival. The mural depicts a small boy taking his dinosaur for a walk. The fact that the dinosaur is rendered in the form of child-like graffiti expresses the creative mind of small children and how they merge fantasy with reality.</p>  
                    <p>Location : <a href="#">Ah Quee Street, Penang</a></p>  
                </div>
                <div id="tab2" class="col s12">
                    <p style="font-size: 16px"><strong>FREE</strong> 1 Milo Dino from Mamak Abu.</p>
                    <p class="no-margin">Location: <a href="#" target="_blank">Mamak Abu</a></p>
                    <p class="no-margin">Expiration: 31 Jan, 2018</p>
                </div>
              </div>                
            </div>
      </div>

      <div id="modal4" class="inventory-modal modal">
        <div class="modal-close">
            <span>X</span>
        </div>
        <div class="modal-content">
            <div class="modal-img center">
                <img src="assets/images/i-girl.png" width="100" height="100">
            </div>
            <h5 class="center">Maiden’s Token</h5>
            <hr>
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a  class="active" href="#tab3">Description</a></li>
                        <li class="tab col s3"><a href="#tab4">Reward</a></li>                    
                    </ul>
                </div>
                <div id="tab3" class="col s12">
                    <img src="assets/images/i-actual-girl.jpg" width="100%">
                    <p>"Three Chinese Dolls", Artist(s) Unknown </p>
                    <p>A quaint painting, easily missed if you are not looking for it. The mural art symbolises Malaysia’s 3 major races living peacefully in harmony despite the different cultures and religions. This harmony was achieved through tolerance and collaboration among the three communities.</p>
                    <p>Location : <a href="#" target="_blank">Lorong Soo Hong, Penang</a></p>
                </div>
                <div id="tab4" class="col s12">
                    <p style="font-size: 16px"><strong>20% discounts </strong>on Penang 3D Trick Art Museum entrance ticket.</p>
                    <p class="no-margin">Location: <a href="#">Penang 3D Trick Art Museum</a></p>
                    <p class="no-margin">Expiration: 31 Jan, 2018</p>
                </div>
              </div>                
            </div>
      </div>

      <div id="modal5" class="inventory-modal modal">
        <div class="modal-close">
            <span>X</span>
        </div>
        <div class="modal-content">
            <div class="modal-img center">
                <img src="assets/images/i-bicycle.png" width="100" height="100">
            </div>
            <h5 class="center">Bike of Whizz</h5>
            <hr>
            <div class="row">
                <div class="col s12">
                    <ul class="tabs">
                        <li class="tab col s3"><a  class="active" href="#tab5">Description</a></li>
                        <li class="tab col s3"><a href="#tab6">Reward</a></li>                    
                    </ul>
                </div>
                <div id="tab5" class="col s12">
                    <img src="assets/images/i-actual-bicycle.jpg" width="100%">
                    <p>“Little Children on a Bicycle” by Ernest Zacharevic</p>
                    <p>This painting was commissioned by the Penang Island Municipal Council (MPPP) to provide a collection of street art in conjunction with the 2012 George Town Festival. It depicts a little girl taking her younger brother on a bicycle ride. The joy in their faces echoes down the street, providing a ray of cheer and adding character to Armenian Street.</p>  
                    <p>Location : <a href="#" target="_blank">Armenian St., Penang</a></p>  
                </div>
                <div id="tab6" class="col s12">
                    <p style="font-size: 16px">Claim a 1-day <strong>FREE</strong> subscription for the oBike service.</p>
                    <p class="no-margin">Location: <a href="#">Any oBike stop in Penang</a></p>
                    <p class="no-margin">Expiration: 15th Jan 2018</p>
                </div>
              </div>                
            </div>
      </div>


    <script type="text/javascript" src="assets/js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="assets/lib/materialize/js/materialize.min.js"></script>
    <script type="text/javascript" src="assets/js/main.js"></script>

  <!-- maps js -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyBatcaWSDGpvIRdQjbscIg-H-cpVJ8OQsg"></script>
    <script src="assets/js/jquery.easing.1.3.js"></script>
    <script src="assets/js/markerAnimate.js"></script>
    <script src="assets/js/SlidingMarker.js"></script>
    <script src="assets/js/artMapping.js"></script>

    <script type="text/javascript">
        $(function () {

            let timeout = ()=>{
                return new Promise(resolve => {setTimeout(()=>{
                    map.panTo(marker.getPosition());
                    resolve();
                } , 3000)});
            };
            let pantime = ()=>{
                return new Promise(resolve => {setTimeout(()=>{
                    map.panTo(marker.getPosition());
                    resolve();
                } , 500)});
            }
            var step = 0;
            let mainProcess = async ()=>{
                if(step > 4){
                    return false;
                }
                if (step == 0){
                }else{
                    var steps = [
                        '',
                        new google.maps.LatLng(5.4133645259565855, 100.33778339624405),
                        new google.maps.LatLng(5.413650242245942, 100.33747762441635),
                        new google.maps.LatLng(5.414528752233711, 100.33831715583801),
                        new google.maps.LatLng(5.414656923796949, 100.33819645643234),
                    ];
                    marker.setPosition(steps[step]);
                    await pantime();
                    await pantime();
                    await pantime();
                    // var Lat1 = new google.maps.LatLng(5.414528752233711, 100.33831715583801);
                    // var Lat2 = new google.maps.LatLng(5.415065470473344, 100.3376841545105);
                    // await timeout();
                    // selected_marker.setPosition(Lat1);
                    // // await timeout();
                    // selected_marker.setPosition(Lat2);
                    // await pantime();
                    // await pantime();
                    // await pantime();
                }
                step++;
                // await timeout();
            };
            let createMarker = (type, details)=>{
                var imgs = {
                    art : 'paint.png',
                    history : 'helmet.png',
                    food : 'coffee.png', 
                    museum : 'museum.png',
                    cultural : 'dragon.png',    
                };
                var marker = new google.maps.Marker({
                    position: {lat: details.lat, lng: details.lng},
                    map: map,
                    title: details.name,
                    icon: `assets/images/${imgs[type]}`
                });
                return marker;
            };
            var global_center = new google.maps.LatLng(5.413556783661483, 100.33801406621933);
            var personal_center = new google.maps.LatLng(5.413556783661483, 100.33801406621933);
            var zoomModes = {personal:19, global:16};
            var mapOptions = {
                zoom: zoomModes.personal,
                minZoom: zoomModes.global,
                center: global_center,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                streetViewControl: false,
                mapTypeControl: false,
                styles:[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#444444"}]},{"featureType":"landscape","elementType":"all","stylers":[{"color":"#f2f2f2"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"saturation":-100},{"lightness":45}]},{"featureType":"road.highway","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"all","stylers":[{"color":"#46bcec"},{"visibility":"on"}]}]
            }
            map = new google.maps.Map(document.getElementById('map'), mapOptions);
            museums_markers = museums.map(createMarker.bind(null, 'museum'));
            cultural_sites_markers = cultural_sites.map(createMarker.bind(null, 'cultural'));
            eateries_markers = eateries.map(createMarker.bind(null, 'food'));
            historical_buildings_markers = historical_buildings.map(createMarker.bind(null, 'history'));
            street_arts_markers = street_arts.map(createMarker.bind(null, 'art'));

            var contentString = '<div id="content g-content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<p id="firstHeading" class="firstHeading"><b>“Little Children on a Bicycle” by Ernest Zacharevic</b></p>'+
            '<div id="bodyContent">'+
            '<p><img src="assets/images/i-actual-bicycle.jpg" alt="" class="left g-bicycle" />This painting was commissioned by the Penang Island Municipal Council (MPPP) to provide a collection of street art in conjunction with the 2012 George Town Festival. It depicts a little girl taking her younger brother on a bicycle ride. The joy in their faces echoes down the street, providing a ray of cheer and adding character to Armenian Street.</p>'+
            '<p>Location: Armenian St., Penang</p>'+
            '<a href="#" class="waves-effect waves-light btn pg3btn g-button">Challenge Quest!</a>'+
            '</div>'+
            '</div>';

            var infowindow = new google.maps.InfoWindow({
              content: contentString
            });
            street_arts_markers.map((marker)=>{
                marker.addListener('click', function() {
                  infowindow.open(map, marker);
                });
            });
            // let smart_map = new GMaps({
            //  div: '#map',
            //  lat: 5.4092807,
            //  lng: 100.3169835
            // });
            // let smart_marker = smart_map.addMarker({
            //  lat: 5.4092807,
            //  lng: 100.3169835,
            //  title: "Me!"
            // });
            //marker = new google.maps.Marker({
            
            marker = new SlidingMarker({
                position: personal_center,
                map: map,
                icon: `assets/images/human_icon.png`
            });

            var duration = 1500;

            marker.setDuration(duration);
            marker.setEasing('easeInQuad');
            mainProcess(marker);
            // setTimeout(()=>{
            //  marker.setPosition(newLat);
            // }, 5000);
            // var clickHandler = function (event, clickType) {
            //      var duration = 1000;
            //     marker.setDuration(duration);
               //  marker.setEasing('easeInQuad');
            //     marker.setPosition(event.latLng);
            // };
            let getLatLng =  (event, clickType)=>{
                console.log(`Lat : ${event.latLng.lat()}`);
                console.log(`Lng : ${event.latLng.lng()}`);
                console.log(`${event.latLng.lat()}, ${event.latLng.lng()}`);
            };
            var leftClickHandler = function(event) { getLatLng(event, "left")  };

            google.maps.event.addListener(map, 'click', leftClickHandler);
            google.maps.event.addListener(map, 'click', mainProcess);
            var classname = document.getElementsByClassName("map-button");
            Array.from(classname).forEach(function(element) {
              element.addEventListener('click', mainProcess);
            });
            // window.setInterval(()=>{
            //     map.panTo(marker.getPosition());
            // }, 100);
            // while(true){
            // }
        });
    </script>

      <script type="text/javascript">
        (function ($) {
            $(function () {
                $('.modal').modal();
            });
        })(jQuery);
    </script>
</body>
</html>
